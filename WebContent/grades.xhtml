<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
>
  <f:view contentType="text/html;charset=UTF-8" encoding="UTF-8">
    <f:metadata>
      <f:viewAction action="#{gradesMB.initDataTable}" />
    </f:metadata>

    <h:head>
      <title>Grades</title>
    </h:head>

    <h:form id="form">
      <p:growl id="msgs" showDetail="true" />
      <div class="card">
        <h5>Double click to edit grade</h5>
        <p:dataTable
          id="students"
          var="student"
          value="#{gradesMB.students}"
          editable="true"
          editMode="cell"
          widgetVar="cellCars2"
          editInitEvent="dblclick"
          style="margin-bottom: 20px"
        >
          <p:ajax
            event="cellEdit"
            listener="#{grades.onCellEdit}"
            update=":form:msgs"
          />

          <p:column headerText="Subscription Number">
            <p:cellEditor>
              <f:facet name="output">
                <h:outputText value="#{product.code}" />
              </f:facet>
              <f:facet name="input">
                <p:inputText
                  id="modelInput3"
                  value="#{product.code}"
                  style="width: 100%"
                />
              </f:facet>
            </p:cellEditor>
          </p:column>

          <p:column headerText="Name">
            <p:cellEditor>
              <f:facet name="output">
                <h:outputText value="#{product.name}" />
              </f:facet>
              <f:facet name="input">
                <p:inputText
                  value="#{product.name}"
                  style="width: 100%"
                  label="Name"
                />
              </f:facet>
            </p:cellEditor>
          </p:column>

          <p:column headerText="Surname">
            <p:cellEditor>
              <f:facet name="output">
                <h:outputText value="#{product.inventoryStatus}" />
              </f:facet>
              <f:facet name="input">
                <h:selectOneMenu
                  value="#{product.inventoryStatus}"
                  style="width: 100%"
                >
                  <f:selectItems
                    value="#{grades.inventoryStatusList}"
                    var="status"
                    itemLabel="#{status.text}"
                    itemValue="#{status}"
                  />
                </h:selectOneMenu>
              </f:facet>
            </p:cellEditor>
          </p:column>

          <p:columns
            value="#{gradesMB.gradeTypes}"
            var="gradeType"
            headerText="#{gradeType.name}"
          >
          </p:columns>
        </p:dataTable>
      </div>
      <p:contextMenu for="products2" widgetVar="cMenu">
        <p:menuitem
          value="Edit Cell"
          icon="pi pi-search"
          onclick="PF('cellProducts').showCellEditor();return false;"
        />
        <p:menuitem
          value="Hide Menu"
          icon="pi pi-times"
          onclick="PF('cMenu').hide()"
        />
      </p:contextMenu>
    </h:form>
  </f:view>
</html>
